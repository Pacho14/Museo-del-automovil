<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Museo del Carro VR</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      body { margin: 0; }
      #info {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 15px;
        border-radius: 8px;
        font-family: Arial;
        font-size: 14px;
        z-index: 10;
        max-width: 300px;
      }
      #controls {
        position: absolute;
        bottom: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 15px;
        border-radius: 8px;
        font-family: Arial;
        font-size: 12px;
        z-index: 10;
      }
    </style>
  </head>
  <body>
    <div id="info">
      <h2>üèéÔ∏è MUSEO DEL CARRO</h2>
      <p id="car-info">Haz click en un auto para ver detalles</p>
    </div>
    
    <div id="controls">
      <strong>Controles:</strong><br>
      W/A/S/D o ‚Üë‚Üì‚Üê‚Üí - Movimiento<br>
      Espacio - Saltar<br>
      Mouse - Mirar alrededor<br>
      Click - Interactuar con autos
    </div>

    <a-scene background="color: #FFFFFF">

      <!-- Iluminaci√≥n -->
      <a-light type="ambient" color="#ffffff" intensity="1.2"></a-light>
      <a-light type="directional" position="5 8 5" intensity="1" color="#ffffff" shadow="cast: true"></a-light>
      <a-light type="directional" position="-5 8 -5" intensity="0.8" color="#ffffff"></a-light>

      <!-- Piso blanco -->
      <a-plane rotation="-90 0 0" width="30" height="30" color="#F5F5F5" position="0 0 0"></a-plane>

      <!-- Paredes blancas altas -->
      <a-plane position="0 4 -15" width="30" height="8" color="#FFFFFF" shadow="receive: true"></a-plane>
      <a-plane position="-15 4 0" rotation="0 90 0" width="30" height="8" color="#FFFFFF" shadow="receive: true"></a-plane>
      <a-plane position="15 4 0" rotation="0 90 0" width="30" height="8" color="#FFFFFF" shadow="receive: true"></a-plane>

      <!-- Ventanas arqueadas grandes (izquierda) -->
      <a-cylinder radius="1" height="0.2" color="#B0C4DE" position="-14 3 -14.9" rotation="0 0 0"></a-cylinder>
      <a-plane width="2" height="3" color="#87CEEB" opacity="0.7" position="-14 2.5 -14.95"></a-plane>

      <!-- Ventanas arqueadas (derecha) -->
      <a-cylinder radius="1" height="0.2" color="#B0C4DE" position="14 3 -14.9" rotation="0 0 0"></a-cylinder>
      <a-plane width="2" height="3" color="#87CEEB" opacity="0.7" position="14 2.5 -14.95"></a-plane>

      <!-- Techo blanco con vigas de madera -->
      <a-plane rotation="90 0 0" width="30" height="30" color="#F0F0F0" position="0 8 0"></a-plane>
      
      <!-- Vigas de madera del techo -->
      <a-box width="0.8" height="0.6" depth="30" color="#8B6914" position="-8 7.7 0"></a-box>
      <a-box width="0.8" height="0.6" depth="30" color="#8B6914" position="-4 7.7 0"></a-box>
      <a-box width="0.8" height="0.6" depth="30" color="#8B6914" position="0 7.7 0"></a-box>
      <a-box width="0.8" height="0.6" depth="30" color="#8B6914" position="4 7.7 0"></a-box>
      <a-box width="0.8" height="0.6" depth="30" color="#8B6914" position="8 7.7 0"></a-box>
      
      <!-- Vigas transversales -->
      <a-box width="30" height="0.4" depth="0.8" color="#8B6914" position="0 7.8 -12"></a-box>
      <a-box width="30" height="0.4" depth="0.8" color="#8B6914" position="0 7.8 -6"></a-box>
      <a-box width="30" height="0.4" depth="0.8" color="#8B6914" position="0 7.8 0"></a-box>
      <a-box width="30" height="0.4" depth="0.8" color="#8B6914" position="0 7.8 6"></a-box>
      <a-box width="30" height="0.4" depth="0.8" color="#8B6914" position="0 7.8 12"></a-box>

      <!-- PEDESTALES AMARILLOS CON AUTOS DE CARRERAS -->

      <!-- PEDESTAL 1: Ferrari cl√°sico rojo -->
      <a-entity position="-8 0 -8" data-car="ferrari" data-type="ferrari">
        <!-- Pedestal amarillo -->
        <a-cylinder radius="1.5" height="0.4" color="#FFD700" position="0 0.2 0"></a-cylinder>
        <!-- Auto Ferrari rojo -->
        <a-box width="1.8" height="0.9" depth="4.2" color="#DC143C" position="0 0.7 0"></a-box>
        <a-box width="1.6" height="0.7" depth="1.8" color="#DC143C" position="0 1.5 -0.3"></a-box>
        <!-- Ruedas -->
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="-0.7 0.45 1.1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="0.7 0.45 1.1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="-0.7 0.45 -1.1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="0.7 0.45 -1.1" rotation="0 0 90"></a-cylinder>
        <!-- Etiqueta -->
        <a-text value="FERRARI F40" position="0 2.3 0" scale="1.5 1.5 1.5" color="white" align="center"></a-text>
      </a-entity>

      <!-- PEDESTAL 2: Formula 1 rojo -->
      <a-entity position="0 0 -10" data-car="formula1">
        <!-- Pedestal amarillo -->
        <a-cylinder radius="1.5" height="0.4" color="#FFD700" position="0 0.2 0"></a-cylinder>
        <!-- Monoplaza F1 -->
        <a-box width="1.4" height="0.8" depth="3.5" color="#FF0000" position="0 0.6 0"></a-box>
        <!-- Aler√≥n delantero -->
        <a-box width="2.2" height="0.3" depth="0.5" color="#FF0000" position="0 0.9 1.5"></a-box>
        <!-- Ruedas grandes -->
        <a-cylinder radius="0.35" height="0.2" color="#000000" position="-0.6 0.35 1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.35" height="0.2" color="#000000" position="0.6 0.35 1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.35" height="0.2" color="#000000" position="-0.6 0.35 -1.2" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.35" height="0.2" color="#000000" position="0.6 0.35 -1.2" rotation="0 0 90"></a-cylinder>
        <!-- Etiqueta -->
        <a-text value="FORMULA 1 2024" position="0 2.2 0" scale="1.5 1.5 1.5" color="white" align="center"></a-text>
      </a-entity>

      <!-- PEDESTAL 3: Ferrari Testarossa -->
      <a-entity position="8 0 -8" data-car="testarossa">
        <!-- Pedestal amarillo -->
        <a-cylinder radius="1.5" height="0.4" color="#FFD700" position="0 0.2 0"></a-cylinder>
        <!-- Auto Testarossa -->
        <a-box width="2" height="0.95" depth="4.3" color="#C41E3A" position="0 0.7 0"></a-box>
        <a-box width="1.8" height="0.75" depth="2" color="#C41E3A" position="0 1.5 -0.2"></a-box>
        <!-- Spoiler trasero -->
        <a-box width="2.3" height="1.2" depth="0.3" color="#333333" position="0 1.5 -2"></a-box>
        <!-- Ruedas -->
        <a-cylinder radius="0.42" height="0.28" color="#1a1a1a" position="-0.75 0.5 1.2" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.42" height="0.28" color="#1a1a1a" position="0.75 0.5 1.2" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.42" height="0.28" color="#1a1a1a" position="-0.75 0.5 -1.2" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.42" height="0.28" color="#1a1a1a" position="0.75 0.5 -1.2" rotation="0 0 90"></a-cylinder>
        <!-- Etiqueta -->
        <a-text value="TESTAROSSA" position="0 2.4 0" scale="1.5 1.5 1.5" color="white" align="center"></a-text>
      </a-entity>

      <!-- PEDESTAL 4: Auto deportivo blanco -->
      <a-entity position="-8 0 2" data-car="porsche">
        <!-- Pedestal amarillo -->
        <a-cylinder radius="1.5" height="0.4" color="#FFD700" position="0 0.2 0"></a-cylinder>
        <!-- Auto blanco -->
        <a-box width="1.9" height="1" depth="4" color="#F0F0F0" position="0 0.7 0"></a-box>
        <a-box width="1.7" height="0.8" depth="2" color="#F0F0F0" position="0 1.6 -0.3"></a-box>
        <!-- L√≠nea roja deportiva -->
        <a-box width="2" height="0.1" depth="4" color="#FF0000" position="0 1 0"></a-box>
        <!-- Ruedas -->
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="-0.75 0.4 1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="0.75 0.4 1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="-0.75 0.4 -1.2" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.4" height="0.25" color="#000000" position="0.75 0.4 -1.2" rotation="0 0 90"></a-cylinder>
        <!-- Etiqueta -->
        <a-text value="PORSCHE 911" position="0 2.3 0" scale="1.5 1.5 1.5" color="black" align="center"></a-text>
      </a-entity>

      <!-- PEDESTAL 5: Modelo GLB Fast-71 -->
      <a-entity position="0 0.5 2" data-car="fast71">
        <!-- Pedestal amarillo -->
        <a-cylinder radius="1.5" height="0.4" color="#FFD700" position="0 0 0"></a-cylinder>
        <!-- Modelo GLB escalado -->
        <a-entity gltf-model="url(./fast-71.glb)" scale="2 2 2"></a-entity>
      </a-entity>

      <!-- PEDESTAL 6: Auto rojo deportivo -->
      <a-entity position="8 0 2" rotation="0 -25 0" data-car="lamborghini">
        <!-- Pedestal amarillo -->
        <a-cylinder radius="1.5" height="0.4" color="#FFD700" position="0 0.2 0"></a-cylinder>
        <!-- Auto deportivo rojo -->
        <a-box width="1.8" height="1.1" depth="4" color="#E60000" position="0 0.7 0"></a-box>
        <a-box width="1.6" height="0.85" depth="2" color="#E60000" position="0 1.7 -0.2"></a-box>
        <!-- Aler√≥n -->
        <a-box width="2.1" height="1" depth="0.3" color="#1a1a1a" position="0 1.6 -2"></a-box>
        <!-- Ruedas grandes -->
        <a-cylinder radius="0.48" height="0.3" color="#1a1a1a" position="-0.8 0.5 1.1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.48" height="0.3" color="#1a1a1a" position="0.8 0.5 1.1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.48" height="0.3" color="#1a1a1a" position="-0.8 0.5 -1.1" rotation="0 0 90"></a-cylinder>
        <a-cylinder radius="0.48" height="0.3" color="#1a1a1a" position="0.8 0.5 -1.1" rotation="0 0 90"></a-cylinder>
        <!-- Etiqueta -->
        <a-text value="LAMBORGHINI" position="0 2.5 0" scale="1.5 1.5 1.5" color="white" align="center"></a-text>
      </a-entity>

      <!-- Cartel de bienvenida -->
      <a-text value="ÔøΩÔ∏è MUSEO DEL CARRO üèéÔ∏è" position="0 6.5 -14" scale="4 4 4" color="#DC143C" align="center" font="https://cdn.aframe.io/fonts/Roboto-msdf.json"></a-text>

      <!-- Punto de c√°mara inicial con controles mejorados -->
      <a-entity id="player" camera position="0 1.8 10" look-controls wasd-controls></a-entity>

      <!-- Script para interacci√≥n con autos -->
      <script>
        // Crear contexto de audio
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        // Funci√≥n para reproducir sonido
        function playSound(frequency = 800, duration = 200) {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = frequency;
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration / 1000);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + duration / 1000);
        }

        // Funci√≥n para reproducir sonido de motor
        function engineSound() {
          playSound(150, 100);
          setTimeout(() => playSound(200, 150), 100);
          setTimeout(() => playSound(250, 200), 250);
        }

        // Datos de los autos
        const cars = {
          'ferrari': {
            name: 'FERRARI F40',
            year: '1987',
            power: '478 CV',
            speed: '324 km/h',
            info: 'Legendario superdeportivo italiano. Primer coche con carrocer√≠a en fibra de carbono.'
          },
          'formula1': {
            name: 'FORMULA 1 2024',
            year: '2024',
            power: '1050 CV',
            speed: '370 km/h',
            info: 'M√°quina de carreras de √∫ltima generaci√≥n. Tecnolog√≠a h√≠brida avanzada.'
          },
          'testarossa': {
            name: 'FERRARI TESTAROSSA',
            year: '1984',
            power: '390 CV',
            speed: '290 km/h',
            info: 'Cl√°sico italiano con motor b√≥xer de 12 cilindros. Icono de los 80s.'
          },
          'porsche': {
            name: 'PORSCHE 911',
            year: '1963',
            power: '130 CV',
            speed: '200 km/h',
            info: 'Cl√°sico alem√°n. Uno de los autos m√°s legendarios del mundo.'
          },
          'fast71': {
            name: 'FAST 71 GLB',
            year: '2024',
            power: '550 CV',
            speed: '300 km/h',
            info: 'Modelo deportivo moderno con tecnolog√≠a de punta.'
          },
          'lamborghini': {
            name: 'LAMBORGHINI REVUELTO',
            year: '2023',
            power: '1001 CV',
            speed: '350 km/h',
            info: 'Superdeportivo h√≠brido italiano. Futuro de la conducci√≥n de lujo.'
          }
        };

        // Funci√≥n para mostrar info del auto
        function showCarInfo(carKey) {
          const car = cars[carKey];
          if (car) {
            document.getElementById('car-info').innerHTML = `
              <strong>${car.name}</strong><br>
              A√±o: ${car.year}<br>
              Potencia: ${car.power}<br>
              Velocidad: ${car.speed}<br><br>
              <em>${car.info}</em>
            `;
          }
        }

        // Raycaster para detectar clicks en autos
        document.addEventListener('click', function() {
          const cameraEl = document.querySelector('[camera]');
          const raycaster = new THREE.Raycaster();
          const mouse = new THREE.Vector2(0, 0);

          raycaster.setFromCamera(mouse, cameraEl.object3D.getWorldPosition(new THREE.Vector3()));
          
          // Obtener todos los autos
          const ferraris = document.querySelectorAll('[data-car]');
          const intersects = [];
          
          ferraris.forEach(car => {
            const carMesh = car.object3D;
            const geometry = new THREE.BoxGeometry(2, 1.5, 4);
            const mesh = new THREE.Mesh(geometry);
            mesh.copy(carMesh);
            intersects.push(...raycaster.intersectObject(carMesh, true));
          });

          if (intersects.length > 0) {
            // Reproducir sonido de motor
            engineSound();
            
            // Animar y mostrar info del primer auto clickeado
            let element = intersects[0].object;
            while (element.parent && !element.parent.userData.carType) {
              element = element.parent;
            }
            if (element.parent && element.parent.userData.carType) {
              showCarInfo(element.parent.userData.carType);
              // Rotar el auto
              element.parent.setAttribute('animation', 'property: rotation; to: 0 360 0; duration: 2000; easing: easeInOutQuad');
            }
          }
        });

        // Animar los autos (rotaci√≥n suave)
        window.addEventListener('load', () => {
          const cars = document.querySelectorAll('[data-car]');
          cars.forEach(car => {
            car.setAttribute('animation', 'property: rotation; to: 0 360 0; dur: 8000; easing: linear; loop: true');
          });
        });
      </script>
